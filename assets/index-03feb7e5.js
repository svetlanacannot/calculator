var A=Object.defineProperty;var f=(r,e,t)=>e in r?A(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var i=(r,e,t)=>(f(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const n of u)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(u){const n={};return u.integrity&&(n.integrity=u.integrity),u.referrerpolicy&&(n.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?n.credentials="include":u.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(u){if(u.ep)return;u.ep=!0;const n=t(u);fetch(u.href,n)}})();class g{constructor(){i(this,"_previousComputeSequenceArray",[]);i(this,"_computeSequenceArray",[]);i(this,"_computed",null)}get previousComputeSequenceArray(){return this._previousComputeSequenceArray}set previousComputeSequenceArray(e){this._previousComputeSequenceArray=e}get computeSequenceArray(){return this._computeSequenceArray}set computeSequenceArray(e){this._computeSequenceArray=e}get computed(){return this._computed}set computed(e){this._computed=e}appendNumber(e){const t=this.computeSequenceArray[this.computeSequenceArray.length-1];(t==null?void 0:t.type)==="number"?t.value+=e:this.computeSequenceArray.length===1&&t.value==="-"?(t.type="number",t.value+=e):this.computeSequenceArray.push({type:"number",value:e})}appendOperation(e){this.computed!==null&&this.previousComputeSequenceArray.push({type:"operation",value:"="},{type:"number",value:this.computed.toString()});const t=this.computeSequenceArray[this.computeSequenceArray.length-1];this.computed=null,(t==null?void 0:t.type)==="operation"?t.value=e:this.computeSequenceArray.push({type:"operation",value:e})}appendComma(){var t;const e=this.computeSequenceArray[this.computeSequenceArray.length-1];(e==null?void 0:e.type)==="number"&&(e==null?void 0:e.value.charAt(((t=e==null?void 0:e.value)==null?void 0:t.length)-1))!=="."&&(e.value+=".")}changeLastOperandToPercent(){const e=this.computeSequenceArray[this.computeSequenceArray.length-1],t=this.computeSequenceArray[this.computeSequenceArray.length-3];(e==null?void 0:e.type)==="number"&&(e.value=(parseFloat(t.value)*parseFloat(e.value)/100).toString())}compute(){this.computed===null?this.computeSequenceArray.length!==0&&(this.previousComputeSequenceArray=this.computeSequenceArray,this.computed=parseFloat(this.computeSequenceByPriority(this.computeSequenceArray).value),this.computeSequenceArray=new Array({type:"number",value:this.computed.toString()})):(this.previousComputeSequenceArray.push({type:"operation",value:"="},{type:"number",value:this.computed.toString()}),this.computeSequenceArray=[],this.computed=null)}clear(){this.computeSequenceArray.length===0?this.previousComputeSequenceArray=[]:this.computed!=null&&this.previousComputeSequenceArray.push({type:"operation",value:"="},{type:"number",value:this.computed.toString()}),this.computeSequenceArray=[],this.computed=null}deleteLast(){this.computeSequenceArray.length!==0&&this.computeSequenceArray.pop()}computeSequenceByPriority(e){const t=["*","\xF7","-","+"],o=[...e];return t.forEach(u=>{for(;o.find(n=>n.value===u)!=null;)o.forEach((n,c)=>{if(n.value===u){const d=n,q=o[c-1],v=o[c+1],y=this.copmuteTwoOperands(d.value,parseFloat(q.value),parseFloat(v.value));y!=null&&o.splice(c-1,3,{type:"number",value:y.toString()})}})}),o[0]}copmuteTwoOperands(e,t,o){switch(e){case"+":return parseFloat((t+o).toFixed(10));case"-":return parseFloat((t-o).toFixed(10));case"*":return parseFloat((t*o).toFixed(10));case"\xF7":if(o!==0)return parseFloat((t/o).toFixed(10))}return null}}class C{constructor(e,t){i(this,"previousOperationTextElement");i(this,"currentOperationTextElement");this.previousOperationTextElement=e,this.currentOperationTextElement=t}updateScreen(e,t,o){this.previousOperationTextElement.innerHTML=e.map(u=>u.value).join(""),this.currentOperationTextElement.innerHTML=t.map(u=>u.value).join(""),o!=null&&(this.previousOperationTextElement.innerHTML=e.map(u=>u.value).join(""),this.currentOperationTextElement.innerHTML="="+o.toString())}}const h=document.querySelector("#previousText"),S=document.querySelector("#currentText"),p=document.querySelector("#allClearButton"),x=document.querySelectorAll(".number"),E=document.querySelectorAll(".operation"),a=document.querySelector("#equalsButton"),s=document.querySelector("#commaButton"),l=document.querySelector("#deleteButton"),m=document.querySelector("#percentButton");if(h!=null&&S!=null){const r=new g,e=new C(h,S);p==null||p.addEventListener("click",()=>{r.clear(),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)}),l==null||l.addEventListener("click",()=>{r.deleteLast(),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)}),x.forEach(t=>t.addEventListener("click",()=>{t.textContent!==null&&r.appendNumber(t.textContent),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})),E.forEach(t=>t.addEventListener("click",()=>{t.textContent!==null&&r.appendOperation(t.textContent),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})),a==null||a.addEventListener("click",()=>{r.compute(),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)}),s==null||s.addEventListener("click",()=>{r.appendComma(),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)}),m==null||m.addEventListener("click",()=>{r.changeLastOperandToPercent(),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})}
