var g=Object.defineProperty;var E=(e,r,t)=>r in e?g(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var p=(e,r,t)=>(E(e,typeof r!="symbol"?r+"":r,t),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))n(u);new MutationObserver(u=>{for(const o of u)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(u){const o={};return u.integrity&&(o.integrity=u.integrity),u.referrerpolicy&&(o.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?o.credentials="include":u.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(u){if(u.ep)return;u.ep=!0;const o=t(u);fetch(u.href,o)}})();var l=(e=>(e.MULTIPLY="*",e.DIVIDE="\xF7",e.PLUS="+",e.MINUS="-",e.EQUALS="=",e))(l||{}),s=(e=>(e.LEFT="(",e.RIGHT=")",e))(s||{}),a=(e=>(e.NUMBER="number",e.OPERATION="operation",e.BRACKET="bracket",e))(a||{});function C(e){const r=e.filter(n=>n.value===s.LEFT),t=e.filter(n=>n.value===s.RIGHT);return r.length===t.length}function T(e,r,t){switch(e){case l.PLUS:return parseFloat((r+t).toFixed(10));case l.MINUS:return parseFloat((r-t).toFixed(10));case l.MULTIPLY:return parseFloat((r*t).toFixed(10));case l.DIVIDE:return t!==0?parseFloat((r/t).toFixed(10)):null;default:return null}}function f(e){const r=[l.MULTIPLY,l.DIVIDE,l.MINUS,l.PLUS],t=[...e];return r.forEach(n=>{for(;t.find(u=>u.value===n)!=null;)t.forEach((u,o)=>{if(u.value===n){const c=t[o-1],i=t[o+1],m=T(u.value,parseFloat(c.value),parseFloat(i.value));m!=null&&t.splice(o-1,3,{type:a.NUMBER,value:m.toString()})}})}),t[0]}function L(e,r,t){var o;const n=[...e],u=(o=r==null?void 0:r.find(c=>c>t))!=null?o:null;if(u!==null){const c=n.filter((m,h)=>h>t&&h<u),i=f(c);n.splice(t,u,i)}return n}class P{constructor(){p(this,"previousComputeSequenceArray",Array());p(this,"computeSequenceArray",Array());p(this,"computed",null)}getPreviousComputeSequenceArray(){return this.previousComputeSequenceArray}getComputeSequenceArray(){return this.computeSequenceArray}getComputed(){return this.computed}appendNumber(r){const t=this.computeSequenceArray[this.computeSequenceArray.length-1];(t==null?void 0:t.value.length)>19||(t==null||t.type===a.OPERATION||t.type===a.BRACKET?this.computeSequenceArray.push({type:a.NUMBER,value:r}):(t.type===a.NUMBER||this.computeSequenceArray.length===1&&t.value===l.MINUS)&&(t.type=a.NUMBER,t.value+=r))}appendOperation(r){this.computed!==null&&this.previousComputeSequenceArray.push({type:a.OPERATION,value:l.EQUALS},{type:a.NUMBER,value:this.computed.toString()});const t=this.computeSequenceArray[this.computeSequenceArray.length-1];this.computed=null,(t==null?void 0:t.type)===a.OPERATION?t.value=r:this.computeSequenceArray.push({type:a.OPERATION,value:r})}appendBracket(r){this.computeSequenceArray.push({type:a.BRACKET,value:r})}appendComma(){const r=this.computeSequenceArray[this.computeSequenceArray.length-1];(r==null?void 0:r.type)===a.NUMBER&&(r==null?void 0:r.value.charAt(r.value.length-1))!=="."&&(r.value+=".")}changeLastOperandToPercent(){const r=this.computeSequenceArray[this.computeSequenceArray.length-1],t=this.computeSequenceArray[this.computeSequenceArray.length-3];(r==null?void 0:r.type)===a.NUMBER&&t!=null&&(r.value=(parseFloat(t.value)*parseFloat(r.value)/100).toString())}clear(){this.computeSequenceArray.length===0?this.previousComputeSequenceArray=[]:this.computed!=null&&this.previousComputeSequenceArray.push({type:a.OPERATION,value:l.EQUALS},{type:a.NUMBER,value:this.computed.toString()}),this.computeSequenceArray=[],this.computed=null}deleteLast(){const{computeSequenceArray:r}=this;if(r.length!==0){const t=r.length-1;r[t].value.slice(0,-1),r[t].value===""&&r.pop()}}compute(){var r,t;if(this.computed!==null){this.moveComputedToPreviousSequence(this.computed.toString());return}if(this.computeSequenceArray.length!==0){if(this.previousComputeSequenceArray=this.computeSequenceArray,!C(this.computeSequenceArray)){this.computeSequenceArray=[{type:"exception",value:"Brackets are not closed"}];return}const n=(r=this.computeSequenceArray.map((c,i)=>c.value===s.LEFT?i:null))==null?void 0:r.filter(c=>c!==null),u=(t=this.computeSequenceArray.map((c,i)=>c.value===s.RIGHT?i:null))==null?void 0:t.filter(c=>c!==null);n==null||n.reverse().forEach(c=>{L(this.computeSequenceArray,u,c)});const o=f(this.computeSequenceArray);this.computed=parseFloat(o.value)}}moveComputedToPreviousSequence(r){this.previousComputeSequenceArray.push({type:a.OPERATION,value:l.EQUALS},{type:a.NUMBER,value:r}),this.computeSequenceArray=[],this.computed=null}}class x{constructor(r,t,n,u){p(this,"previousOperationTextElement");p(this,"currentOperationTextElement");p(this,"screenElement");p(this,"btnsToExpand");this.screenElement=r,this.previousOperationTextElement=t,this.currentOperationTextElement=n,this.btnsToExpand=u}updateScreen(r,t,n){this.previousOperationTextElement.innerText=r.map(u=>u.value).join(""),this.currentOperationTextElement.innerText=t.map(u=>u.value).join(""),n!=null&&(this.previousOperationTextElement.innerText=r.map(u=>u.value).join(""),this.currentOperationTextElement.innerText=`=${n}`),this.currentOperationTextElement.scrollWidth>this.screenElement.scrollWidth&&(this.currentOperationTextElement.style.fontSize="2rem")}expandKeyboard(){this.btnsToExpand.forEach(r=>{r.style.display==="block"?r.style.display="none":r.style.display="block"})}}const A=document.querySelector("#screen"),q=document.querySelector("#previousText"),v=document.querySelector("#currentText"),N=document.querySelectorAll(".button--expanded"),d=document.querySelector("#expandKeyboardButton"),B=document.querySelectorAll(".allClearButton"),U=document.querySelectorAll(".number"),k=document.querySelectorAll(".operation"),y=document.querySelector("#equalsButton"),S=document.querySelector("#commaButton"),R=document.querySelectorAll(".deleteButton"),O=document.querySelectorAll(".percentButton"),F=document.querySelectorAll(".bracketButton");if(A!=null&&q!=null&&v!=null){const e=new P,r=new x(A,q,v,N);d==null||d.addEventListener("click",()=>{r.expandKeyboard()}),B.forEach(t=>{t==null||t.addEventListener("click",()=>{e.clear(),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())})}),R.forEach(t=>{t==null||t.addEventListener("click",()=>{e.deleteLast(),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())})}),U.forEach(t=>t.addEventListener("click",()=>{t.textContent!==null&&e.appendNumber(t.textContent),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())})),k.forEach(t=>t.addEventListener("click",()=>{t.textContent!==null&&e.appendOperation(t.textContent),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())})),F.forEach(t=>t.addEventListener("click",()=>{t.textContent!==null&&e.appendBracket(t.textContent),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())})),y==null||y.addEventListener("click",()=>{e.compute(),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())}),S==null||S.addEventListener("click",()=>{e.appendComma(),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())}),O.forEach(t=>{t==null||t.addEventListener("click",()=>{e.changeLastOperandToPercent(),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())})}),document.addEventListener("keypress",t=>{const n={numbers:["0","1","2","3","4","5","6","7","8","9"],operations:["-","+","*","/"],equals:["=","Enter"],comma:",",percent:"%",delete:"Delete"};n.numbers.includes(t.key)?(e.appendNumber(t.key),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())):n.operations.includes(t.key)?(e.appendOperation(t.key),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())):n.equals.includes(t.key)?(e.compute(),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())):t.key===n.comma?(e.appendComma(),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())):t.key===n.delete?(e.deleteLast(),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed())):t.key===n.percent&&(e.changeLastOperandToPercent(),r.updateScreen(e.getPreviousComputeSequenceArray(),e.getComputeSequenceArray(),e.getComputed()))})}
