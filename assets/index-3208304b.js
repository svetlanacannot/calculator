var A=Object.defineProperty;var v=(r,t,e)=>t in r?A(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var a=(r,t,e)=>(v(r,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();class f{constructor(){a(this,"_previousComputeSequenceArray",[]);a(this,"_computeSequenceArray",[]);a(this,"_computed",null)}get previousComputeSequenceArray(){return this._previousComputeSequenceArray}set previousComputeSequenceArray(t){this._previousComputeSequenceArray=t}get computeSequenceArray(){return this._computeSequenceArray}set computeSequenceArray(t){this._computeSequenceArray=t}get computed(){return this._computed}set computed(t){this._computed=t}appendNumber(t){const e=this.computeSequenceArray[this.computeSequenceArray.length-1];(e==null?void 0:e.value.length)>19||(e==null||e.type==="operation"||e.type==="bracket"?this.computeSequenceArray.push({type:"number",value:t}):(e.type==="number"||this.computeSequenceArray.length===1&&e.value==="-")&&(e.type="number",e.value+=t))}appendOperation(t){this.computed!==null&&this.previousComputeSequenceArray.push({type:"operation",value:"="},{type:"number",value:this.computed.toString()});const e=this.computeSequenceArray[this.computeSequenceArray.length-1];this.computed=null,(e==null?void 0:e.type)==="operation"?e.value=t:this.computeSequenceArray.push({type:"operation",value:t})}appendBracket(t){this.computeSequenceArray.push({type:"bracket",value:t})}appendComma(){var e;const t=this.computeSequenceArray[this.computeSequenceArray.length-1];(t==null?void 0:t.type)==="number"&&(t==null?void 0:t.value.charAt(((e=t==null?void 0:t.value)==null?void 0:e.length)-1))!=="."&&(t.value+=".")}changeLastOperandToPercent(){const t=this.computeSequenceArray[this.computeSequenceArray.length-1],e=this.computeSequenceArray[this.computeSequenceArray.length-3];(t==null?void 0:t.type)==="number"&&e!=null&&(t.value=(parseFloat(e.value)*parseFloat(t.value)/100).toString())}clear(){this.computeSequenceArray.length===0?this.previousComputeSequenceArray=[]:this.computed!=null&&this.previousComputeSequenceArray.push({type:"operation",value:"="},{type:"number",value:this.computed.toString()}),this.computeSequenceArray=[],this.computed=null}deleteLast(){this.computeSequenceArray.length!==0&&(this.computeSequenceArray[this.computeSequenceArray.length-1].value=this.computeSequenceArray[this.computeSequenceArray.length-1].value.slice(0,-1),this.computeSequenceArray[this.computeSequenceArray.length-1].value===""&&this.computeSequenceArray.pop())}compute(){if(this.computed!==null){this.previousComputeSequenceArray.push({type:"equals",value:"="},{type:"number",value:this.computed.toString()}),this.computeSequenceArray=[],this.computed=null;return}if(this.computeSequenceArray.length!==0){if(this.previousComputeSequenceArray=this.computeSequenceArray,!this.validateBrackets(this.computeSequenceArray)){this.computeSequenceArray=[{type:"exception",value:"Brackets are not closed"}];return}const t=[...this.computeSequenceArray],e=[],u=[];t.forEach((o,c)=>{o.value==="("?e.push(c):o.value===")"&&u.push(c)}),e.reverse().forEach(o=>{const c=u.find(p=>p>o);if(c!=null){const p=t.filter((i,d)=>d>o&&d<c),s=this.computeSequenceByPriority(p);t.splice(o,c,s)}});const n=this.computeSequenceByPriority(t);this.computed=parseFloat(n.value)}}validateBrackets(t){const e=t.filter(n=>n.value==="("),u=t.filter(n=>n.value===")");return e.length===u.length}computeSequenceByPriority(t){const e=["*","\xF7","-","+"],u=[...t];return e.forEach(n=>{for(;u.find(o=>o.value===n)!=null;)u.forEach((o,c)=>{if(o.value===n){const p=u[c-1],s=u[c+1],i=this.copmuteTwoOperands(o.value,parseFloat(p.value),parseFloat(s.value));i!=null&&u.splice(c-1,3,{type:"number",value:i.toString()})}})}),u[0]}copmuteTwoOperands(t,e,u){switch(t){case"+":return parseFloat((e+u).toFixed(10));case"-":return parseFloat((e-u).toFixed(10));case"*":return parseFloat((e*u).toFixed(10));case"\xF7":if(u!==0)return parseFloat((e/u).toFixed(10))}return null}}class g{constructor(t,e,u){a(this,"previousOperationTextElement");a(this,"currentOperationTextElement");a(this,"screenElement");this.screenElement=t,this.previousOperationTextElement=e,this.currentOperationTextElement=u}updateScreen(t,e,u){this.previousOperationTextElement.innerHTML=t.map(n=>n.value).join(""),this.currentOperationTextElement.innerHTML=e.map(n=>n.value).join(""),u!=null&&(this.previousOperationTextElement.innerHTML=t.map(n=>n.value).join(""),this.currentOperationTextElement.innerHTML="="+u.toString()),this.currentOperationTextElement.scrollWidth>this.screenElement.scrollWidth&&(this.currentOperationTextElement.style.fontSize="2rem")}expandKeyboard(){document.querySelectorAll(".button--expanded").forEach(e=>{e.style.display==="block"?e.style.display="none":e.style.display="block"})}}const h=document.querySelector("#screen"),S=document.querySelector("#previousText"),q=document.querySelector("#currentText"),l=document.querySelector("#expandKeyboardButton"),E=document.querySelectorAll(".allClearButton"),C=document.querySelectorAll(".number"),k=document.querySelectorAll(".operation"),m=document.querySelector("#equalsButton"),y=document.querySelector("#commaButton"),x=document.querySelectorAll(".deleteButton"),L=document.querySelectorAll(".percentButton"),T=document.querySelectorAll(".bracketButton");if(h!=null&&S!=null&&q!=null){const r=new f,t=new g(h,S,q);l==null||l.addEventListener("click",()=>{t.expandKeyboard()}),E.forEach(e=>{e==null||e.addEventListener("click",()=>{r.clear(),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})}),x.forEach(e=>{e==null||e.addEventListener("click",()=>{r.deleteLast(),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})}),C.forEach(e=>e.addEventListener("click",()=>{e.textContent!==null&&r.appendNumber(e.textContent),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})),k.forEach(e=>e.addEventListener("click",()=>{e.textContent!==null&&r.appendOperation(e.textContent),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})),T.forEach(e=>e.addEventListener("click",()=>{e.textContent!==null&&r.appendBracket(e.textContent),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})),m==null||m.addEventListener("click",()=>{r.compute(),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)}),y==null||y.addEventListener("click",()=>{r.appendComma(),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)}),L.forEach(e=>{e==null||e.addEventListener("click",()=>{r.changeLastOperandToPercent(),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})}),document.addEventListener("keypress",e=>{const u={numbers:["0","1","2","3","4","5","6","7","8","9"],operations:["-","+","*","/"],equals:["=","Enter"],comma:",",percent:"%",delete:"Delete"};u.numbers.includes(e.key)?(r.appendNumber(e.key),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)):u.operations.includes(e.key)?(r.appendOperation(e.key),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)):u.equals.includes(e.key)?(r.compute(),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)):e.key===u.comma?(r.appendComma(),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)):e.key===u.delete?(r.deleteLast(),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)):e.key===u.percent&&(r.changeLastOperandToPercent(),t.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed))})}
