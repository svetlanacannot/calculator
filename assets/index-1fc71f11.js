var f=Object.defineProperty;var g=(r,e,t)=>e in r?f(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var i=(r,e,t)=>(g(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))n(u);new MutationObserver(u=>{for(const o of u)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(u){const o={};return u.integrity&&(o.integrity=u.integrity),u.referrerpolicy&&(o.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?o.credentials="include":u.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(u){if(u.ep)return;u.ep=!0;const o=t(u);fetch(u.href,o)}})();class E{constructor(){i(this,"_previousComputeSequenceArray",[]);i(this,"_computeSequenceArray",[]);i(this,"_computed",null)}get previousComputeSequenceArray(){return this._previousComputeSequenceArray}set previousComputeSequenceArray(e){this._previousComputeSequenceArray=e}get computeSequenceArray(){return this._computeSequenceArray}set computeSequenceArray(e){this._computeSequenceArray=e}get computed(){return this._computed}set computed(e){this._computed=e}appendNumber(e){const t=this.computeSequenceArray[this.computeSequenceArray.length-1];(t==null||(t==null?void 0:t.value.length)<19)&&((t==null?void 0:t.type)==="number"?t.value+=e:this.computeSequenceArray.length===1&&t.value==="-"?(t.type="number",t.value+=e):this.computeSequenceArray.push({type:"number",value:e}))}appendOperation(e){this.computed!==null&&this.previousComputeSequenceArray.push({type:"operation",value:"="},{type:"number",value:this.computed.toString()});const t=this.computeSequenceArray[this.computeSequenceArray.length-1];this.computed=null,(t==null?void 0:t.type)==="operation"?t.value=e:this.computeSequenceArray.push({type:"operation",value:e})}appendComma(){var t;const e=this.computeSequenceArray[this.computeSequenceArray.length-1];(e==null?void 0:e.type)==="number"&&(e==null?void 0:e.value.charAt(((t=e==null?void 0:e.value)==null?void 0:t.length)-1))!=="."&&(e.value+=".")}changeLastOperandToPercent(){const e=this.computeSequenceArray[this.computeSequenceArray.length-1],t=this.computeSequenceArray[this.computeSequenceArray.length-3];(e==null?void 0:e.type)==="number"&&t!=null&&(e.value=(parseFloat(t.value)*parseFloat(e.value)/100).toString())}compute(){this.computed===null?this.computeSequenceArray.length!==0&&(this.previousComputeSequenceArray=this.computeSequenceArray,this.computed=parseFloat(this.computeSequenceByPriority(this.computeSequenceArray).value),this.computeSequenceArray=new Array({type:"number",value:this.computed.toString()})):(this.previousComputeSequenceArray.push({type:"operation",value:"="},{type:"number",value:this.computed.toString()}),this.computeSequenceArray=[],this.computed=null)}clear(){this.computeSequenceArray.length===0?this.previousComputeSequenceArray=[]:this.computed!=null&&this.previousComputeSequenceArray.push({type:"operation",value:"="},{type:"number",value:this.computed.toString()}),this.computeSequenceArray=[],this.computed=null}deleteLast(){this.computeSequenceArray.length!==0&&this.computeSequenceArray.pop()}computeSequenceByPriority(e){const t=["*","\xF7","-","+"],n=[...e];return t.forEach(u=>{for(;n.find(o=>o.value===u)!=null;)n.forEach((o,c)=>{if(o.value===u){const q=o,v=n[c-1],A=n[c+1],y=this.copmuteTwoOperands(q.value,parseFloat(v.value),parseFloat(A.value));y!=null&&n.splice(c-1,3,{type:"number",value:y.toString()})}})}),n[0]}copmuteTwoOperands(e,t,n){switch(e){case"+":return parseFloat((t+n).toFixed(10));case"-":return parseFloat((t-n).toFixed(10));case"*":return parseFloat((t*n).toFixed(10));case"\xF7":if(n!==0)return parseFloat((t/n).toFixed(10))}return null}}class C{constructor(e,t,n){i(this,"previousOperationTextElement");i(this,"currentOperationTextElement");i(this,"screenElement");this.screenElement=e,this.previousOperationTextElement=t,this.currentOperationTextElement=n}updateScreen(e,t,n){this.previousOperationTextElement.innerHTML=e.map(u=>u.value).join(""),this.currentOperationTextElement.innerHTML=t.map(u=>u.value).join(""),n!=null&&(this.previousOperationTextElement.innerHTML=e.map(u=>u.value).join(""),this.currentOperationTextElement.innerHTML="="+n.toString()),this.currentOperationTextElement.scrollWidth>this.screenElement.scrollWidth&&(this.currentOperationTextElement.style.fontSize="2rem")}}const h=document.querySelector("#screen"),S=document.querySelector("#previousText"),d=document.querySelector("#currentText"),p=document.querySelector("#allClearButton"),x=document.querySelectorAll(".number"),T=document.querySelectorAll(".operation"),s=document.querySelector("#equalsButton"),a=document.querySelector("#commaButton"),l=document.querySelector("#deleteButton"),m=document.querySelector("#percentButton");if(h!=null&&S!=null&&d!=null){const r=new E,e=new C(h,S,d);p==null||p.addEventListener("click",()=>{r.clear(),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)}),l==null||l.addEventListener("click",()=>{r.deleteLast(),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)}),x.forEach(t=>t.addEventListener("click",()=>{t.textContent!==null&&r.appendNumber(t.textContent),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})),T.forEach(t=>t.addEventListener("click",()=>{t.textContent!==null&&r.appendOperation(t.textContent),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})),s==null||s.addEventListener("click",()=>{r.compute(),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)}),a==null||a.addEventListener("click",()=>{r.appendComma(),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)}),m==null||m.addEventListener("click",()=>{r.changeLastOperandToPercent(),e.updateScreen(r.previousComputeSequenceArray,r.computeSequenceArray,r.computed)})}
