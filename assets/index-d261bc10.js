var f=Object.defineProperty;var g=(t,e,r)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var p=(t,e,r)=>(g(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();class C{constructor(){p(this,"_previousComputeSequenceArray",[]);p(this,"_computeSequenceArray",[]);p(this,"_computed",null)}get previousComputeSequenceArray(){return this._previousComputeSequenceArray}set previousComputeSequenceArray(e){this._previousComputeSequenceArray=e}get computeSequenceArray(){return this._computeSequenceArray}set computeSequenceArray(e){this._computeSequenceArray=e}get computed(){return this._computed}set computed(e){this._computed=e}appendNumber(e){const r=this.computeSequenceArray[this.computeSequenceArray.length-1];(r==null||(r==null?void 0:r.value.length)<19)&&((r==null?void 0:r.type)==="number"?r.value+=e:this.computeSequenceArray.length===1&&r.value==="-"?(r.type="number",r.value+=e):this.computeSequenceArray.push({type:"number",value:e}))}appendOperation(e){this.computed!==null&&this.previousComputeSequenceArray.push({type:"operation",value:"="},{type:"number",value:this.computed.toString()});const r=this.computeSequenceArray[this.computeSequenceArray.length-1];this.computed=null,(r==null?void 0:r.type)==="operation"?r.value=e:this.computeSequenceArray.push({type:"operation",value:e})}appendComma(){var r;const e=this.computeSequenceArray[this.computeSequenceArray.length-1];(e==null?void 0:e.type)==="number"&&(e==null?void 0:e.value.charAt(((r=e==null?void 0:e.value)==null?void 0:r.length)-1))!=="."&&(e.value+=".")}changeLastOperandToPercent(){const e=this.computeSequenceArray[this.computeSequenceArray.length-1],r=this.computeSequenceArray[this.computeSequenceArray.length-3];(e==null?void 0:e.type)==="number"&&r!=null&&(e.value=(parseFloat(r.value)*parseFloat(e.value)/100).toString())}compute(){this.computed===null?this.computeSequenceArray.length!==0&&(this.previousComputeSequenceArray=this.computeSequenceArray,this.computed=parseFloat(this.computeSequenceByPriority(this.computeSequenceArray).value),this.computeSequenceArray=new Array({type:"number",value:this.computed.toString()})):(this.previousComputeSequenceArray.push({type:"operation",value:"="},{type:"number",value:this.computed.toString()}),this.computeSequenceArray=[],this.computed=null)}clear(){this.computeSequenceArray.length===0?this.previousComputeSequenceArray=[]:this.computed!=null&&this.previousComputeSequenceArray.push({type:"operation",value:"="},{type:"number",value:this.computed.toString()}),this.computeSequenceArray=[],this.computed=null}deleteLast(){this.computeSequenceArray.length!==0&&this.computeSequenceArray.pop()}computeSequenceByPriority(e){const r=["*","\xF7","-","+"],u=[...e];return r.forEach(n=>{for(;u.find(o=>o.value===n)!=null;)u.forEach((o,c)=>{if(o.value===n){const q=o,A=u[c-1],v=u[c+1],y=this.copmuteTwoOperands(q.value,parseFloat(A.value),parseFloat(v.value));y!=null&&u.splice(c-1,3,{type:"number",value:y.toString()})}})}),u[0]}copmuteTwoOperands(e,r,u){switch(e){case"+":return parseFloat((r+u).toFixed(10));case"-":return parseFloat((r-u).toFixed(10));case"*":return parseFloat((r*u).toFixed(10));case"\xF7":if(u!==0)return parseFloat((r/u).toFixed(10))}return null}}class E{constructor(e,r,u){p(this,"previousOperationTextElement");p(this,"currentOperationTextElement");p(this,"screenElement");this.screenElement=e,this.previousOperationTextElement=r,this.currentOperationTextElement=u}updateScreen(e,r,u){this.previousOperationTextElement.innerHTML=e.map(n=>n.value).join(""),this.currentOperationTextElement.innerHTML=r.map(n=>n.value).join(""),u!=null&&(this.previousOperationTextElement.innerHTML=e.map(n=>n.value).join(""),this.currentOperationTextElement.innerHTML="="+u.toString()),this.currentOperationTextElement.scrollWidth>this.screenElement.scrollWidth&&(this.currentOperationTextElement.style.fontSize="2rem")}}const d=document.querySelector("#screen"),S=document.querySelector("#previousText"),h=document.querySelector("#currentText"),i=document.querySelector("#allClearButton"),L=document.querySelectorAll(".number"),T=document.querySelectorAll(".operation"),s=document.querySelector("#equalsButton"),a=document.querySelector("#commaButton"),l=document.querySelector("#deleteButton"),m=document.querySelector("#percentButton");if(d!=null&&S!=null&&h!=null){const t=new C,e=new E(d,S,h);i==null||i.addEventListener("click",()=>{t.clear(),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)}),l==null||l.addEventListener("click",()=>{t.deleteLast(),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)}),L.forEach(r=>r.addEventListener("click",()=>{r.textContent!==null&&t.appendNumber(r.textContent),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)})),T.forEach(r=>r.addEventListener("click",()=>{r.textContent!==null&&t.appendOperation(r.textContent),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)})),s==null||s.addEventListener("click",()=>{t.compute(),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)}),a==null||a.addEventListener("click",()=>{t.appendComma(),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)}),m==null||m.addEventListener("click",()=>{t.changeLastOperandToPercent(),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)}),document.addEventListener("keypress",r=>{const u={numbers:["0","1","2","3","4","5","6","7","8","9"],operations:["-","+","*","/"],equals:["=","Enter"],comma:",",percent:"%",delete:"Delete"};u.numbers.includes(r.key)?(t.appendNumber(r.key),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)):u.operations.includes(r.key)?(t.appendOperation(r.key),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)):u.equals.includes(r.key)?(t.compute(),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)):r.key===u.comma?(t.appendComma(),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)):r.key===u.delete?(t.deleteLast(),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed)):r.key===u.percent&&(t.changeLastOperandToPercent(),e.updateScreen(t.previousComputeSequenceArray,t.computeSequenceArray,t.computed))})}
